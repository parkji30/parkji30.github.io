[build]
target = "index.html"
dist = "dist"
# Skip wasm-opt to avoid build issues on CI
no_minification = true

[watch]
watch = ["src", "index.html", "styles.css"]

[serve]
address = "127.0.0.1"
port = 8080
open = true
# Serve index.html for all routes (SPA fallback for client-side routing)
fallback = "index.html"

# Copy index.html to 404.html for GitHub Pages SPA routing
[[hooks]]
stage = "post_build"
command = "cp"
command_arguments = ["dist/index.html", "dist/404.html"]

